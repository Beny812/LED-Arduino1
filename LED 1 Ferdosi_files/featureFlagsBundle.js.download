!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.FeatureFlags=n():e.FeatureFlags=n()}(self,(()=>(()=>{"use strict";var e={938:(e,n,t)=>{var r;!function(o){function i(e,n,t){var r,o,i,a,u,p,h,w,m,y=0,b=[],E=0,k=!1,S=[],A=[],U=!1,O=!1,D=-1;if(r=(t=t||{}).encoding||"UTF8",(m=t.numRounds||1)!==parseInt(m,10)||1>m)throw Error("numRounds must a integer >= 1");if("SHA-1"===e)u=512,p=_,h=M,a=160,w=function(e){return e.slice()};else if(0===e.lastIndexOf("SHA-",0))if(p=function(n,t){return q(n,t,e)},h=function(n,t,r,o){var i,a;if("SHA-224"===e||"SHA-256"===e)i=15+(t+65>>>9<<4),a=16;else{if("SHA-384"!==e&&"SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");i=31+(t+129>>>10<<5),a=32}for(;n.length<=i;)n.push(0);for(n[t>>>5]|=128<<24-t%32,t+=r,n[i]=4294967295&t,n[i-1]=t/4294967296|0,r=n.length,t=0;t<r;t+=a)o=q(n.slice(t,t+a),o,e);if("SHA-224"===e)n=[o[0],o[1],o[2],o[3],o[4],o[5],o[6]];else if("SHA-256"===e)n=o;else if("SHA-384"===e)n=[o[0].a,o[0].b,o[1].a,o[1].b,o[2].a,o[2].b,o[3].a,o[3].b,o[4].a,o[4].b,o[5].a,o[5].b];else{if("SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");n=[o[0].a,o[0].b,o[1].a,o[1].b,o[2].a,o[2].b,o[3].a,o[3].b,o[4].a,o[4].b,o[5].a,o[5].b,o[6].a,o[6].b,o[7].a,o[7].b]}return n},w=function(e){return e.slice()},"SHA-224"===e)u=512,a=224;else if("SHA-256"===e)u=512,a=256;else if("SHA-384"===e)u=1024,a=384;else{if("SHA-512"!==e)throw Error("Chosen SHA variant is not supported");u=1024,a=512}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("Chosen SHA variant is not supported");var P=6;if(p=z,w=function(e){var n,t=[];for(n=0;5>n;n+=1)t[n]=e[n].slice();return t},D=1,"SHA3-224"===e)u=1152,a=224;else if("SHA3-256"===e)u=1088,a=256;else if("SHA3-384"===e)u=832,a=384;else if("SHA3-512"===e)u=576,a=512;else if("SHAKE128"===e)u=1344,a=-1,P=31,O=!0;else{if("SHAKE256"!==e)throw Error("Chosen SHA variant is not supported");u=1088,a=-1,P=31,O=!0}h=function(e,n,t,r,o){var i,a=P,s=[],c=(t=u)>>>5,l=0,f=n>>>5;for(i=0;i<f&&n>=t;i+=c)r=z(e.slice(i,i+c),r),n-=t;for(e=e.slice(i),n%=t;e.length<c;)e.push(0);for(e[(i=n>>>3)>>2]^=a<<i%4*8,e[c-1]^=2147483648,r=z(e,r);32*s.length<o&&(e=r[l%5][l/5|0],s.push(e.b),!(32*s.length>=o));)s.push(e.a),0==64*(l+=1)%t&&(z(null,r),l=0);return s}}i=g(n,r,D),o=B(e),this.setHMACKey=function(n,t,i){var s;if(!0===k)throw Error("HMAC key already set");if(!0===U)throw Error("Cannot set HMAC key after calling update");if(!0===O)throw Error("SHAKE is not supported for HMAC");for(n=(t=g(t,r=(i||{}).encoding||"UTF8",D)(n)).binLen,t=t.value,i=(s=u>>>3)/4-1,s<n/8&&(t=h(t,n,0,B(e),a));t.length<=i;)t.push(0);for(n=0;n<=i;n+=1)S[n]=909522486^t[n],A[n]=1549556828^t[n];o=p(S,o),y=u,k=!0},this.update=function(e){var n,t,r,a=0,s=u>>>5;for(e=(n=i(e,b,E)).binLen,t=n.value,n=e>>>5,r=0;r<n;r+=s)a+u<=e&&(o=p(t.slice(r,r+s),o),a+=u);y+=a,b=t.slice(a>>>5),E=e%u,U=!0},this.getHash=function(n,t){var r,i,u,g;if(!0===k)throw Error("Cannot call getHash after setting HMAC key");if(u=v(t),!0===O){if(-1===u.shakeLen)throw Error("shakeLen must be specified in options");a=u.shakeLen}switch(n){case"HEX":r=function(e){return s(e,a,D,u)};break;case"B64":r=function(e){return c(e,a,D,u)};break;case"BYTES":r=function(e){return l(e,a,D)};break;case"ARRAYBUFFER":try{i=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}r=function(e){return f(e,a,D)};break;case"UINT8ARRAY":try{i=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}r=function(e){return d(e,a,D)};break;default:throw Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}for(g=h(b.slice(),E,y,w(o),a),i=1;i<m;i+=1)!0===O&&0!=a%32&&(g[g.length-1]&=16777215>>>24-a%32),g=h(g,a,0,B(e),a);return r(g)},this.getHMAC=function(n,t){var r,i,g,m;if(!1===k)throw Error("Cannot call getHMAC without first setting HMAC key");switch(g=v(t),n){case"HEX":r=function(e){return s(e,a,D,g)};break;case"B64":r=function(e){return c(e,a,D,g)};break;case"BYTES":r=function(e){return l(e,a,D)};break;case"ARRAYBUFFER":try{r=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}r=function(e){return f(e,a,D)};break;case"UINT8ARRAY":try{r=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}r=function(e){return d(e,a,D)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return i=h(b.slice(),E,y,w(o),a),m=p(A,B(e)),r(m=h(i,a,u,m,a))}}function a(e,n){this.a=e,this.b=n}function u(e,n,t,r){var o,i,a,u,s;for(n=n||[0],i=(t=t||0)>>>3,s=-1===r?3:0,o=0;o<e.length;o+=1)a=(u=o+i)>>>2,n.length<=a&&n.push(0),n[a]|=e[o]<<8*(s+u%4*r);return{value:n,binLen:8*e.length+t}}function s(e,n,t,r){var o,i,a,u="";for(n/=8,a=-1===t?3:0,o=0;o<n;o+=1)i=e[o>>>2]>>>8*(a+o%4*t),u+="0123456789abcdef".charAt(i>>>4&15)+"0123456789abcdef".charAt(15&i);return r.outputUpper?u.toUpperCase():u}function c(e,n,t,r){var o,i,a,u,s="",c=n/8;for(u=-1===t?3:0,o=0;o<c;o+=3)for(i=o+1<c?e[o+1>>>2]:0,a=o+2<c?e[o+2>>>2]:0,a=(e[o>>>2]>>>8*(u+o%4*t)&255)<<16|(i>>>8*(u+(o+1)%4*t)&255)<<8|a>>>8*(u+(o+2)%4*t)&255,i=0;4>i;i+=1)s+=8*o+6*i<=n?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>6*(3-i)&63):r.b64Pad;return s}function l(e,n,t){var r,o,i,a="";for(n/=8,i=-1===t?3:0,r=0;r<n;r+=1)o=e[r>>>2]>>>8*(i+r%4*t)&255,a+=String.fromCharCode(o);return a}function f(e,n,t){n/=8;var r,o,i,a=new ArrayBuffer(n);for(i=new Uint8Array(a),o=-1===t?3:0,r=0;r<n;r+=1)i[r]=e[r>>>2]>>>8*(o+r%4*t)&255;return a}function d(e,n,t){n/=8;var r,o,i=new Uint8Array(n);for(o=-1===t?3:0,r=0;r<n;r+=1)i[r]=e[r>>>2]>>>8*(o+r%4*t)&255;return i}function v(e){var n={outputUpper:!1,b64Pad:"=",shakeLen:-1};if(e=e||{},n.outputUpper=e.outputUpper||!1,!0===e.hasOwnProperty("b64Pad")&&(n.b64Pad=e.b64Pad),!0===e.hasOwnProperty("shakeLen")){if(0!=e.shakeLen%8)throw Error("shakeLen must be a multiple of 8");n.shakeLen=e.shakeLen}if("boolean"!=typeof n.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof n.b64Pad)throw Error("Invalid b64Pad formatting option");return n}function g(e,n,t){switch(n){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":e=function(e,n,r){var o,i,a,u,s,c,l=e.length;if(0!=l%2)throw Error("String of HEX type must be in byte increments");for(n=n||[0],s=(r=r||0)>>>3,c=-1===t?3:0,o=0;o<l;o+=2){if(i=parseInt(e.substr(o,2),16),isNaN(i))throw Error("String of HEX type contains invalid characters");for(a=(u=(o>>>1)+s)>>>2;n.length<=a;)n.push(0);n[a]|=i<<8*(c+u%4*t)}return{value:n,binLen:4*l+r}};break;case"TEXT":e=function(e,r,o){var i,a,u,s,c,l,f,d,v=0;if(r=r||[0],c=(o=o||0)>>>3,"UTF8"===n)for(d=-1===t?3:0,u=0;u<e.length;u+=1)for(a=[],128>(i=e.charCodeAt(u))?a.push(i):2048>i?(a.push(192|i>>>6),a.push(128|63&i)):55296>i||57344<=i?a.push(224|i>>>12,128|i>>>6&63,128|63&i):(u+=1,i=65536+((1023&i)<<10|1023&e.charCodeAt(u)),a.push(240|i>>>18,128|i>>>12&63,128|i>>>6&63,128|63&i)),s=0;s<a.length;s+=1){for(l=(f=v+c)>>>2;r.length<=l;)r.push(0);r[l]|=a[s]<<8*(d+f%4*t),v+=1}else if("UTF16BE"===n||"UTF16LE"===n)for(d=-1===t?2:0,a="UTF16LE"===n&&1!==t||"UTF16LE"!==n&&1===t,u=0;u<e.length;u+=1){for(i=e.charCodeAt(u),!0===a&&(i=(s=255&i)<<8|i>>>8),l=(f=v+c)>>>2;r.length<=l;)r.push(0);r[l]|=i<<8*(d+f%4*t),v+=2}return{value:r,binLen:8*v+o}};break;case"B64":e=function(e,n,r){var o,i,a,u,s,c,l,f,d=0;if(-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(i=e.indexOf("="),e=e.replace(/\=/g,""),-1!==i&&i<e.length)throw Error("Invalid '=' found in base-64 string");for(n=n||[0],c=(r=r||0)>>>3,f=-1===t?3:0,i=0;i<e.length;i+=4){for(s=e.substr(i,4),a=u=0;a<s.length;a+=1)u|=(o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(s.charAt(a)))<<18-6*a;for(a=0;a<s.length-1;a+=1){for(o=(l=d+c)>>>2;n.length<=o;)n.push(0);n[o]|=(u>>>16-8*a&255)<<8*(f+l%4*t),d+=1}}return{value:n,binLen:8*d+r}};break;case"BYTES":e=function(e,n,r){var o,i,a,u,s,c;for(n=n||[0],a=(r=r||0)>>>3,c=-1===t?3:0,i=0;i<e.length;i+=1)o=e.charCodeAt(i),u=(s=i+a)>>>2,n.length<=u&&n.push(0),n[u]|=o<<8*(c+s%4*t);return{value:n,binLen:8*e.length+r}};break;case"ARRAYBUFFER":try{e=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}e=function(e,n,r){return u(new Uint8Array(e),n,r,t)};break;case"UINT8ARRAY":try{e=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}e=function(e,n,r){return u(e,n,r,t)};break;default:throw Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return e}function p(e,n){return e<<n|e>>>32-n}function h(e,n){return 32<n?(n-=32,new a(e.b<<n|e.a>>>32-n,e.a<<n|e.b>>>32-n)):0!==n?new a(e.a<<n|e.b>>>32-n,e.b<<n|e.a>>>32-n):e}function w(e,n){return e>>>n|e<<32-n}function m(e,n){var t=null;t=new a(e.a,e.b);return 32>=n?new a(t.a>>>n|t.b<<32-n&4294967295,t.b>>>n|t.a<<32-n&4294967295):new a(t.b>>>n-32|t.a<<64-n&4294967295,t.a>>>n-32|t.b<<64-n&4294967295)}function y(e,n){return 32>=n?new a(e.a>>>n,e.b>>>n|e.a<<32-n&4294967295):new a(0,e.a>>>n-32)}function b(e,n,t){return e&n^~e&t}function E(e,n,t){return new a(e.a&n.a^~e.a&t.a,e.b&n.b^~e.b&t.b)}function k(e,n,t){return e&n^e&t^n&t}function S(e,n,t){return new a(e.a&n.a^e.a&t.a^n.a&t.a,e.b&n.b^e.b&t.b^n.b&t.b)}function A(e){return w(e,2)^w(e,13)^w(e,22)}function U(e){var n=m(e,28),t=m(e,34);return e=m(e,39),new a(n.a^t.a^e.a,n.b^t.b^e.b)}function O(e){return w(e,6)^w(e,11)^w(e,25)}function D(e){var n=m(e,14),t=m(e,18);return e=m(e,41),new a(n.a^t.a^e.a,n.b^t.b^e.b)}function P(e){return w(e,7)^w(e,18)^e>>>3}function R(e){var n=m(e,1),t=m(e,8);return e=y(e,7),new a(n.a^t.a^e.a,n.b^t.b^e.b)}function I(e){return w(e,17)^w(e,19)^e>>>10}function T(e){var n=m(e,19),t=m(e,61);return e=y(e,6),new a(n.a^t.a^e.a,n.b^t.b^e.b)}function F(e,n){var t=(65535&e)+(65535&n);return((e>>>16)+(n>>>16)+(t>>>16)&65535)<<16|65535&t}function C(e,n,t,r){var o=(65535&e)+(65535&n)+(65535&t)+(65535&r);return((e>>>16)+(n>>>16)+(t>>>16)+(r>>>16)+(o>>>16)&65535)<<16|65535&o}function L(e,n,t,r,o){var i=(65535&e)+(65535&n)+(65535&t)+(65535&r)+(65535&o);return((e>>>16)+(n>>>16)+(t>>>16)+(r>>>16)+(o>>>16)+(i>>>16)&65535)<<16|65535&i}function j(e,n){var t,r,o;return t=(65535&e.b)+(65535&n.b),o=(65535&(r=(e.b>>>16)+(n.b>>>16)+(t>>>16)))<<16|65535&t,t=(65535&e.a)+(65535&n.a)+(r>>>16),new a((65535&(r=(e.a>>>16)+(n.a>>>16)+(t>>>16)))<<16|65535&t,o)}function H(e,n,t,r){var o,i,u;return o=(65535&e.b)+(65535&n.b)+(65535&t.b)+(65535&r.b),u=(65535&(i=(e.b>>>16)+(n.b>>>16)+(t.b>>>16)+(r.b>>>16)+(o>>>16)))<<16|65535&o,o=(65535&e.a)+(65535&n.a)+(65535&t.a)+(65535&r.a)+(i>>>16),new a((65535&(i=(e.a>>>16)+(n.a>>>16)+(t.a>>>16)+(r.a>>>16)+(o>>>16)))<<16|65535&o,u)}function x(e,n,t,r,o){var i,u,s;return i=(65535&e.b)+(65535&n.b)+(65535&t.b)+(65535&r.b)+(65535&o.b),s=(65535&(u=(e.b>>>16)+(n.b>>>16)+(t.b>>>16)+(r.b>>>16)+(o.b>>>16)+(i>>>16)))<<16|65535&i,i=(65535&e.a)+(65535&n.a)+(65535&t.a)+(65535&r.a)+(65535&o.a)+(u>>>16),new a((65535&(u=(e.a>>>16)+(n.a>>>16)+(t.a>>>16)+(r.a>>>16)+(o.a>>>16)+(i>>>16)))<<16|65535&i,s)}function N(e,n){return new a(e.a^n.a,e.b^n.b)}function B(e){var n,t=[];if("SHA-1"===e)t=[1732584193,4023233417,2562383102,271733878,3285377520];else if(0===e.lastIndexOf("SHA-",0))switch(t=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],n=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],e){case"SHA-224":break;case"SHA-256":t=n;break;case"SHA-384":t=[new a(3418070365,t[0]),new a(1654270250,t[1]),new a(2438529370,t[2]),new a(355462360,t[3]),new a(1731405415,t[4]),new a(41048885895,t[5]),new a(3675008525,t[6]),new a(1203062813,t[7])];break;case"SHA-512":t=[new a(n[0],4089235720),new a(n[1],2227873595),new a(n[2],4271175723),new a(n[3],1595750129),new a(n[4],2917565137),new a(n[5],725511199),new a(n[6],4215389547),new a(n[7],327033209)];break;default:throw Error("Unknown SHA variant")}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("No SHA variants supported");for(e=0;5>e;e+=1)t[e]=[new a(0,0),new a(0,0),new a(0,0),new a(0,0),new a(0,0)]}return t}function _(e,n){var t,r,o,i,a,u,s,c=[];for(t=n[0],r=n[1],o=n[2],i=n[3],a=n[4],s=0;80>s;s+=1)c[s]=16>s?e[s]:p(c[s-3]^c[s-8]^c[s-14]^c[s-16],1),u=20>s?L(p(t,5),r&o^~r&i,a,1518500249,c[s]):40>s?L(p(t,5),r^o^i,a,1859775393,c[s]):60>s?L(p(t,5),k(r,o,i),a,2400959708,c[s]):L(p(t,5),r^o^i,a,3395469782,c[s]),a=i,i=o,o=p(r,30),r=t,t=u;return n[0]=F(t,n[0]),n[1]=F(r,n[1]),n[2]=F(o,n[2]),n[3]=F(i,n[3]),n[4]=F(a,n[4]),n}function M(e,n,t,r){var o;for(o=15+(n+65>>>9<<4);e.length<=o;)e.push(0);for(e[n>>>5]|=128<<24-n%32,n+=t,e[o]=4294967295&n,e[o-1]=n/4294967296|0,n=e.length,o=0;o<n;o+=16)r=_(e.slice(o,o+16),r);return r}function q(e,n,t){var r,o,i,u,s,c,l,f,d,v,g,p,h,w,m,y,N,B,_,M,q,z,K,J=[];if("SHA-224"===t||"SHA-256"===t)v=64,p=1,z=Number,h=F,w=C,m=L,y=P,N=I,B=A,_=O,q=k,M=b,K=V;else{if("SHA-384"!==t&&"SHA-512"!==t)throw Error("Unexpected error in SHA-2 implementation");v=80,p=2,z=a,h=j,w=H,m=x,y=R,N=T,B=U,_=D,q=S,M=E,K=Y}for(t=n[0],r=n[1],o=n[2],i=n[3],u=n[4],s=n[5],c=n[6],l=n[7],g=0;g<v;g+=1)16>g?(d=g*p,f=e.length<=d?0:e[d],d=e.length<=d+1?0:e[d+1],J[g]=new z(f,d)):J[g]=w(N(J[g-2]),J[g-7],y(J[g-15]),J[g-16]),f=m(l,_(u),M(u,s,c),K[g],J[g]),d=h(B(t),q(t,r,o)),l=c,c=s,s=u,u=h(i,f),i=o,o=r,r=t,t=h(f,d);return n[0]=h(t,n[0]),n[1]=h(r,n[1]),n[2]=h(o,n[2]),n[3]=h(i,n[3]),n[4]=h(u,n[4]),n[5]=h(s,n[5]),n[6]=h(c,n[6]),n[7]=h(l,n[7]),n}function z(e,n){var t,r,o,i,u=[],s=[];if(null!==e)for(r=0;r<e.length;r+=2)n[(r>>>1)%5][(r>>>1)/5|0]=N(n[(r>>>1)%5][(r>>>1)/5|0],new a(e[r+1],e[r]));for(t=0;24>t;t+=1){for(i=B("SHA3-"),r=0;5>r;r+=1){o=n[r][0];var c=n[r][1],l=n[r][2],f=n[r][3],d=n[r][4];u[r]=new a(o.a^c.a^l.a^f.a^d.a,o.b^c.b^l.b^f.b^d.b)}for(r=0;5>r;r+=1)s[r]=N(u[(r+4)%5],h(u[(r+1)%5],1));for(r=0;5>r;r+=1)for(o=0;5>o;o+=1)n[r][o]=N(n[r][o],s[r]);for(r=0;5>r;r+=1)for(o=0;5>o;o+=1)i[o][(2*r+3*o)%5]=h(n[r][o],K[r][o]);for(r=0;5>r;r+=1)for(o=0;5>o;o+=1)n[r][o]=N(i[r][o],new a(~i[(r+1)%5][o].a&i[(r+2)%5][o].a,~i[(r+1)%5][o].b&i[(r+2)%5][o].b));n[0][0]=N(n[0][0],J[t])}return n}var V,Y,K,J;Y=[new a((V=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298])[0],3609767458),new a(V[1],602891725),new a(V[2],3964484399),new a(V[3],2173295548),new a(V[4],4081628472),new a(V[5],3053834265),new a(V[6],2937671579),new a(V[7],3664609560),new a(V[8],2734883394),new a(V[9],1164996542),new a(V[10],1323610764),new a(V[11],3590304994),new a(V[12],4068182383),new a(V[13],991336113),new a(V[14],633803317),new a(V[15],3479774868),new a(V[16],2666613458),new a(V[17],944711139),new a(V[18],2341262773),new a(V[19],2007800933),new a(V[20],1495990901),new a(V[21],1856431235),new a(V[22],3175218132),new a(V[23],2198950837),new a(V[24],3999719339),new a(V[25],766784016),new a(V[26],2566594879),new a(V[27],3203337956),new a(V[28],1034457026),new a(V[29],2466948901),new a(V[30],3758326383),new a(V[31],168717936),new a(V[32],1188179964),new a(V[33],1546045734),new a(V[34],1522805485),new a(V[35],2643833823),new a(V[36],2343527390),new a(V[37],1014477480),new a(V[38],1206759142),new a(V[39],344077627),new a(V[40],1290863460),new a(V[41],3158454273),new a(V[42],3505952657),new a(V[43],106217008),new a(V[44],3606008344),new a(V[45],1432725776),new a(V[46],1467031594),new a(V[47],851169720),new a(V[48],3100823752),new a(V[49],1363258195),new a(V[50],3750685593),new a(V[51],3785050280),new a(V[52],3318307427),new a(V[53],3812723403),new a(V[54],2003034995),new a(V[55],3602036899),new a(V[56],1575990012),new a(V[57],1125592928),new a(V[58],2716904306),new a(V[59],442776044),new a(V[60],593698344),new a(V[61],3733110249),new a(V[62],2999351573),new a(V[63],3815920427),new a(3391569614,3928383900),new a(3515267271,566280711),new a(3940187606,3454069534),new a(4118630271,4000239992),new a(116418474,1914138554),new a(174292421,2731055270),new a(289380356,3203993006),new a(460393269,320620315),new a(685471733,587496836),new a(852142971,1086792851),new a(1017036298,365543100),new a(1126000580,2618297676),new a(1288033470,3409855158),new a(1501505948,4234509866),new a(1607167915,987167468),new a(1816402316,1246189591)],J=[new a(0,1),new a(0,32898),new a(2147483648,32906),new a(2147483648,2147516416),new a(0,32907),new a(0,2147483649),new a(2147483648,2147516545),new a(2147483648,32777),new a(0,138),new a(0,136),new a(0,2147516425),new a(0,2147483658),new a(0,2147516555),new a(2147483648,139),new a(2147483648,32905),new a(2147483648,32771),new a(2147483648,32770),new a(2147483648,128),new a(0,32778),new a(2147483648,2147483658),new a(2147483648,2147516545),new a(2147483648,32896),new a(0,2147483649),new a(2147483648,2147516424)],K=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]],void 0===(r=function(){return i}.call(n,t,n,e))||(e.exports=r)}()},15:(e,n)=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e){return(i="function"==typeof Symbol&&"symbol"==t(Symbol.iterator)?function(e){return t(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)})(e)}function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function u(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i=[],a=!0,u=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==t.return||t.return()}finally{if(u)throw o}}return i}}(e,n)||c(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,n){if(e){if("string"==typeof e)return l(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,n):void 0}}function l(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function f(e){function n(e,n){Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.message=e,this.code=n}return n.prototype=new Error,n.prototype.name=e,n.prototype.constructor=n,n}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.createConsoleLogger=n.basicLogger=void 0,n.initialize=fn,n.version=void 0;var d=f("LaunchDarklyUnexpectedResponseError"),v=f("LaunchDarklyInvalidEnvironmentIdError"),g=f("LaunchDarklyInvalidUserError"),p=f("LaunchDarklyInvalidEventKeyError"),h=f("LaunchDarklyInvalidArgumentError"),w=f("LaunchDarklyFlagFetchError"),m=f("LaunchDarklyInvalidDataError");function y(e){return!(e>=400&&e<500)||400===e||408===e||429===e}for(var b=Object.freeze({__proto__:null,LDUnexpectedResponseError:d,LDInvalidEnvironmentIdError:v,LDInvalidUserError:g,LDInvalidEventKeyError:p,LDInvalidArgumentError:h,LDFlagFetchError:w,LDInvalidDataError:m,isHttpErrorRecoverable:y}),E=[],k=[],S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=0;A<64;++A)E[A]=S[A],k[S.charCodeAt(A)]=A;function U(e,n,t){for(var r,o,i=[],a=n;a<t;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(E[(o=r)>>18&63]+E[o>>12&63]+E[o>>6&63]+E[63&o]);return i.join("")}k["-".charCodeAt(0)]=62,k["_".charCodeAt(0)]=63;var O=Array.isArray,D=Object.keys,P=Object.prototype.hasOwnProperty,R=["key","secondary","ip","country","email","firstName","lastName","avatar","name"];function I(e,n){return(e.endsWith("/")?e.substring(0,e.length-1):e)+(n.startsWith("/")?"":"/")+n}function T(e){return function(e){for(var n,t=e.length,r=t%3,o=[],i=0,a=t-r;i<a;i+=16383)o.push(U(e,i,i+16383>a?a:i+16383));return 1===r?(n=e[t-1],o.push(E[n>>2]+E[n<<4&63]+"==")):2===r&&(n=(e[t-2]<<8)+e[t-1],o.push(E[n>>10]+E[n>>4&63]+E[n<<2&63]+"=")),o.join("")}(function(e){for(var n=[],t=0;t<e.length;t++)n.push(e.charCodeAt(t));return n}(unescape(encodeURIComponent(e))))}function F(e){return T(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function C(e){return JSON.parse(JSON.stringify(e))}function L(e,n){return function e(n,r){if(n===r)return!0;if(n&&r&&"object"==t(n)&&"object"==t(r)){var o,i,a,u=O(n),s=O(r);if(u&&s){if((i=n.length)!=r.length)return!1;for(o=i;0!=o--;)if(!e(n[o],r[o]))return!1;return!0}if(u!=s)return!1;var c=n instanceof Date,l=r instanceof Date;if(c!=l)return!1;if(c&&l)return n.getTime()==r.getTime();var f=n instanceof RegExp,d=r instanceof RegExp;if(f!=d)return!1;if(f&&d)return n.toString()==r.toString();var v=D(n);if((i=v.length)!==D(r).length)return!1;for(o=i;0!=o--;)if(!P.call(r,v[o]))return!1;for(o=i;0!=o--;)if(!e(n[a=v[o]],r[a]))return!1;return!0}return n!=n&&r!=r}(e,n)}function j(e){setTimeout(e,0)}function H(e,n){var t=e.then((function(e){return n&&setTimeout((function(){n(null,e)}),0),e}),(function(e){if(!n)return Promise.reject(e);setTimeout((function(){n(e,null)}),0)}));return n?void 0:t}function x(e){var n={};for(var t in e)q(e,t)&&(n[t]={value:e[t],version:0});return n}function N(e){var n={};for(var t in e)q(e,t)&&(n[t]=e[t].value);return n}function B(e,n){for(var t,r=n.slice(0),o=[],i=e;r.length>0;){for(t=[];i>0;){var a=r.shift();if(!a)break;(i-=F(JSON.stringify(a)).length)<0&&t.length>0?r.unshift(a):t.push(a)}i=e,o.push(t)}return o}function _(e){var n=e.version||"3.8.2";return e.userAgent+"/"+n}function M(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.reduce((function(e,n){return o(o({},e),n)}),{})}function q(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function z(e){if(!e)return e;var n;for(var t in R){var r=R[t],i=e[r];void 0!==i&&"string"!=typeof i&&((n=n||o({},e))[r]=String(i))}return n||e}for(var V=Object.freeze({__proto__:null,appendUrlPath:I,btoa:T,base64URLEncode:F,clone:C,deepEquals:L,onNextTick:j,wrapPromiseCallback:H,transformValuesToVersionedValues:x,transformVersionedValuesToValues:N,chunkUserEventsForUrl:B,getLDUserAgentString:_,extend:M,objectHasOwnProperty:q,sanitizeUser:z}),Y=function(e,n){return function(e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var t=new Uint8Array(16);e.exports=function(){return n(t),t}}else{var r=new Array(16);e.exports=function(){for(var e,n=0;n<16;n++)0==(3&n)&&(e=4294967296*Math.random()),r[n]=e>>>((3&n)<<3)&255;return r}}}(n={exports:{}}),n.exports}(),K=[],J=0;J<256;++J)K[J]=(J+256).toString(16).substr(1);var X,$,G=0,W=0,Z=function(e,n,t){var r=n&&t||0,o=n||[],i=(e=e||{}).node||X,a=void 0!==e.clockseq?e.clockseq:$;if(null==i||null==a){var u=Y();null==i&&(i=X=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==a&&(a=$=16383&(u[6]<<8|u[7]))}var s=void 0!==e.msecs?e.msecs:(new Date).getTime(),c=void 0!==e.nsecs?e.nsecs:W+1,l=s-G+(c-W)/1e4;if(l<0&&void 0===e.clockseq&&(a=a+1&16383),(l<0||s>G)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");G=s,W=c,$=a;var f=(1e4*(268435455&(s+=122192928e5))+c)%4294967296;o[r++]=f>>>24&255,o[r++]=f>>>16&255,o[r++]=f>>>8&255,o[r++]=255&f;var d=s/4294967296*1e4&268435455;o[r++]=d>>>8&255,o[r++]=255&d,o[r++]=d>>>24&15|16,o[r++]=d>>>16&255,o[r++]=a>>>8|128,o[r++]=255&a;for(var v=0;v<6;++v)o[r+v]=i[v];return n||function(e,n){var t=0,r=K;return[r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],"-",r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]],r[e[t++]]].join("")}(o)},Q=["debug","info","warn","error","none"];function ee(e,n){if(e&&e.destination&&"function"!=typeof e.destination)throw new Error("destination for basicLogger was set to a non-function");function t(e){return function(n){console&&console[e]&&console[e].call(console,n)}}var r=e&&e.destination?[e.destination,e.destination,e.destination,e.destination]:[t("log"),t("info"),t("warn"),t("error")],o=!(!e||!e.destination),i=e&&void 0!==e.prefix&&null!==e.prefix?e.prefix:"[LaunchDarkly] ",a=1;if(e&&e.level)for(var u=0;u<Q.length;u++)Q[u]===e.level&&(a=u);function c(e,t,a){if(!(a.length<1)){var u,c=o?t+": "+i:i;if(1!==a.length&&n){var l=s(a);l[0]=c+l[0],u=n.apply(void 0,s(l))}else u=c+a[0];try{r[e](u)}catch(e){console&&console.log&&console.log("[LaunchDarkly] Configured logger's "+t+" method threw an exception: "+e)}}}for(var l={},f=function(e){var n=Q[e];if("none"!==n)if(e<a)l[n]=function(){};else{var t=e;l[n]=function(){c(t,n,arguments)}}},d=0;d<Q.length;d++)f(d);return l}function ne(e,n){return ee({level:e,prefix:n})}function te(e){return e&&e.message?e.message:"string"==typeof e||e instanceof String?e:JSON.stringify(e)}var re=" Please see https://docs.launchdarkly.com/sdk/client-side/javascript#initializing-the-client for instructions on SDK initialization.",oe=function(e){return'Expected application/json content type but got "'+e+'"'},ie=function(e){return"local storage is unavailable: "+te(e)},ae=function(e){return"network error"+(e?" ("+e+")":"")},ue=function(e){return'Custom event "'+e+'" does not exist'},se=function(){return"Environment not found. Double check that you specified a valid environment/client-side ID."+re},ce=function(){return"No environment/client-side ID was specified."+re},le=function(e){return"Error fetching flag settings: "+te(e)},fe=function(){return"No user specified."+re},de=function(){return"Invalid user specified."+re},ve=function(){return"LaunchDarkly client was initialized with bootstrap data that did not include flag metadata. Events may not be sent correctly."+re},ge=function(e,n){return n?'"'+e+'" is deprecated, please use "'+n+'"':'"'+e+'" is deprecated'},pe=function(e,n,t){return"Received error "+e+(401===e?" (invalid SDK key)":"")+" for "+n+" - "+(y(e)?t:"giving up permanently")},he=function(){return"Cannot make HTTP requests in this environment."+re},we=function(e){return"Opening stream connection to "+e},me=function(e,n){return"Error on stream connection: "+te(e)+", will continue retrying after "+n+" milliseconds."},ye=function(e){return"Error on stream connection ".concat(te(e),", giving up permanently")},be=function(e){return'Ignoring unknown config option "'+e+'"'},Ee=function(e,n,t){return'Config option "'+e+'" should be of type '+n+", got "+t+", using default value"},ke=function(e,n){return'Config option "'+e+'" should be a boolean, got '+n+", converting to boolean"},Se=function(e,n,t){return'Config option "'+e+'" was set to '+n+", changing to minimum value of "+t},Ae=function(e){return"polling for feature flags at "+e},Ue=function(e){return'received streaming update for flag "'+e+'"'},Oe=function(e){return'received streaming update for flag "'+e+'" but ignored due to version check'},De=function(e){return'received streaming deletion for flag "'+e+'"'},Pe=function(e){return'received streaming deletion for flag "'+e+'" but ignored due to version check'},Re=function(e){return'enqueueing "'+e+'" event'},Ie=function(e){return"sending "+e+" events"},Te=function(e){return'Config option "'.concat(e,'" must only contain letters, numbers, ., _ or -.')},Fe=function(e,n){return'an inspector: "'.concat(n,'" of an invalid type (').concat(e,") was configured")},Ce=function(e,n){return'an inspector: "'.concat(n,'" of type: "').concat(e,'" generated an exception')},Le=function(e){return'Value of "'.concat(e,'" was longer than 64 characters and was discarded.')},je=Object.freeze({__proto__:null,clientInitialized:function(){return"LaunchDarkly client initialized"},clientNotReady:function(){return"LaunchDarkly client is not ready"},eventCapacityExceeded:function(){return"Exceeded event queue capacity. Increase capacity to avoid dropping events."},eventWithoutUser:function(){return"Be sure to call `identify` in the LaunchDarkly client: https://docs.launchdarkly.com/sdk/features/identify#javascript"},invalidContentType:oe,invalidKey:function(){return"Event key must be a string"},localStorageUnavailable:ie,networkError:ae,unknownCustomEventKey:ue,environmentNotFound:se,environmentNotSpecified:ce,errorFetchingFlags:le,userNotSpecified:fe,invalidUser:de,invalidData:function(){return"Invalid data received from LaunchDarkly; connection may have been interrupted"},bootstrapOldFormat:ve,bootstrapInvalid:function(){return"LaunchDarkly bootstrap data is not available because the back end could not read the flags."},deprecated:ge,httpErrorMessage:pe,httpUnavailable:he,identifyDisabled:function(){return"identify() has no effect here; it must be called on the main client instance"},streamClosing:function(){return"Closing stream connection"},streamConnecting:we,streamError:me,unrecoverableStreamError:ye,unknownOption:be,wrongOptionType:Ee,wrongOptionTypeBoolean:ke,optionBelowMinimum:Se,debugPolling:Ae,debugStreamPing:function(){return"received ping message from stream"},debugStreamPut:function(){return"received streaming update for all flags"},debugStreamPatch:Ue,debugStreamPatchIgnored:Oe,debugStreamDelete:De,debugStreamDeleteIgnored:Pe,debugEnqueueingEvent:Re,debugPostingEvents:Ie,debugPostingDiagnosticEvent:function(e){return"sending diagnostic event ("+e.kind+")"},invalidTagValue:Te,invalidInspector:Fe,inspectorMethodError:Ce,tagValueTooLong:Le}),He={baseUrl:{default:"https://app.launchdarkly.com"},streamUrl:{default:"https://clientstream.launchdarkly.com"},eventsUrl:{default:"https://events.launchdarkly.com"},sendEvents:{default:!0},streaming:{type:"boolean"},sendLDHeaders:{default:!0},requestHeaderTransform:{type:"function"},inlineUsersInEvents:{default:!1},allowFrequentDuplicateEvents:{default:!1},sendEventsOnlyForVariation:{default:!1},useReport:{default:!1},evaluationReasons:{default:!1},eventCapacity:{default:100,minimum:1},flushInterval:{default:2e3,minimum:2e3},samplingInterval:{default:0,minimum:0},streamReconnectDelay:{default:1e3,minimum:0},allAttributesPrivate:{default:!1},privateAttributeNames:{default:[]},bootstrap:{type:"string|object"},diagnosticRecordingInterval:{default:9e5,minimum:2e3},diagnosticOptOut:{default:!1},wrapperName:{type:"string"},wrapperVersion:{type:"string"},stateProvider:{type:"object"},autoAliasingOptOut:{default:!1},application:{validator:function(e,n,t){var r={};return n.id&&(r.id=Ne("".concat(e,".id"),n.id,t)),n.version&&(r.version=Ne("".concat(e,".version"),n.version,t)),r}},inspectors:{default:[]}},xe=/^(\w|\.|-)+$/;function Ne(e,n,t){if("string"==typeof n&&n.match(xe)){if(!(n.length>64))return n;t.warn(Le(e))}else t.warn(Te(e))}function Be(e,n,t,r){var o=M({logger:{default:r}},He,t),a={all_attributes_private:"allAttributesPrivate",private_attribute_names:"privateAttributeNames",samplingInterval:null,allowFrequentDuplicateEvents:void 0};function u(e){j((function(){n&&n.maybeReportError(new h(e))}))}var s=M({},e||{});return function(e){var n=e;Object.keys(a).forEach((function(e){if(void 0!==n[e]){var t=a[e];r&&r.warn(ge(e,t)),t&&(void 0===n[t]&&(n[t]=n[e]),delete n[e])}}))}(s),function(e){Q.forEach((function(n){if("none"!==n&&(!e[n]||"function"!=typeof e[n]))throw new Error("Provided logger instance must support logger."+n+"(...) method")}))}((s=function(e){var n=M({},e),t=function(e){if(null===e)return"any";if(void 0!==e){if(Array.isArray(e))return"array";var n=i(e);return"boolean"===n||"string"===n||"number"===n||"function"===n?n:"object"}};return Object.keys(e).forEach((function(i){var a=e[i];if(null!=a){var s=o[i];if(void 0===s)u(be(i));else{var c=s.type||t(s.default),l=s.validator;if(l){var f=l(i,e[i],r);void 0!==f?n[i]=f:delete n[i]}else if("any"!==c){var d=c.split("|"),v=t(a);d.indexOf(v)<0?"boolean"===c?(n[i]=!!a,u(ke(i,v))):(u(Ee(i,c,v)),n[i]=s.default):"number"===v&&void 0!==s.minimum&&a<s.minimum&&(u(Se(i,a,s.minimum)),n[i]=s.minimum)}}}})),n}(s=function(e){var n=M({},e);return Object.keys(o).forEach((function(e){void 0!==n[e]&&null!==n[e]||(n[e]=o[e]&&o[e].default)})),n}(s))).logger),s}function _e(e){var n={};return e&&(e.application&&void 0!==e.application.id&&null!==e.application.id&&(n["application-id"]=[e.application.id]),e.application&&void 0!==e.application.version&&null!==e.application.id&&(n["application-version"]=[e.application.version])),n}function Me(e,n){if(n&&!n.sendLDHeaders)return{};var t={"X-LaunchDarkly-User-Agent":_(e)};n&&n.wrapperName&&(t["X-LaunchDarkly-Wrapper"]=n.wrapperVersion?n.wrapperName+"/"+n.wrapperVersion:n.wrapperName);var r=_e(n),o=Object.keys(r);return o.length&&(t["x-launchdarkly-tags"]=o.sort().map((function(e){return Array.isArray(r[e])?r[e].sort().map((function(n){return"".concat(e,"/").concat(n)})):["".concat(e,"/").concat(r[e])]})).reduce((function(e,n){return e.concat(n)}),[]).join(" ")),t}function qe(e,n){return n&&n.requestHeaderTransform?n.requestHeaderTransform(o({},e)):e}function ze(e,n,t){var r="/a/"+n+".gif",o=M({"Content-Type":"application/json"},Me(e,t)),i=e.httpFallbackPing,a={sendChunk:function(n,a,u,s){var c=JSON.stringify(n),l=u?null:Z();return s?function n(r){var i=u?o:M({},o,{"X-LaunchDarkly-Event-Schema":"3","X-LaunchDarkly-Payload-ID":l});return e.httpRequest("POST",a,qe(i,t),c).promise.then((function(e){if(e)return e.status>=400&&y(e.status)&&r?n(!1):function(e){var n={status:e.status},t=e.header("date");if(t){var r=Date.parse(t);r&&(n.serverTime=r)}return n}(e)})).catch((function(){return r?n(!1):Promise.reject()}))}(!0).catch((function(){})):(i&&i(a+r+"?d="+F(c)),Promise.resolve())},sendEvents:function(n,t,r){if(!e.httpRequest)return Promise.resolve();var o,i=e.httpAllowsPost();o=i?[n]:B(2e3-t.length,n);for(var u=[],s=0;s<o.length;s++)u.push(a.sendChunk(o[s],t,r,i));return Promise.all(u)}};return a}function Ve(e,n,t,r){var o={};function i(){var e="",o=r.getUser();return o&&(e=t||T(JSON.stringify(o))),"ld:"+n+":"+e}return o.loadFlags=function(){return e.get(i()).then((function(e){if(null==e)return null;try{var n=JSON.parse(e);if(n){var t=n.$schema;void 0===t||t<1?n=x(n):delete n.$schema}return n}catch(e){return o.clearFlags().then((function(){return null}))}}))},o.saveFlags=function(n){var t=M({},n,{$schema:1});return e.set(i(),JSON.stringify(t))},o.clearFlags=function(){return e.clear(i())},o}function Ye(e,n,t,r){var o,i=n.streamUrl,a=n.logger,u={},s=I(i,"/eval/"+t),c=n.useReport,l=n.evaluationReasons,f=n.streamReconnectDelay,d=Me(e,n),v=!1,g=null,p=null,h=null,w=null,m=null,b=0;function E(e){if(e.status&&"number"==typeof e.status&&!y(e.status))return A(),a.error(ye(e)),void(p&&(clearTimeout(p),p=null));var n=function(){var e,n=(e=function(){var e=f*Math.pow(2,b);return e>3e4?3e4:e}())-Math.trunc(.5*Math.random()*e);return b+=1,n}();v||(a.warn(me(e,n)),v=!0),U(!1),A(),k(n)}function k(e){p||(e?p=setTimeout(S,e):S())}function S(){var r;p=null;var u="",f={headers:d,readTimeoutMillis:3e5};if(e.eventSourceFactory){for(var v in null!=w&&(u="h="+w),c?e.eventSourceAllowsReport?(r=s,f.method="REPORT",f.headers["Content-Type"]="application/json",f.body=JSON.stringify(h)):(r=I(i,"/ping/"+t),u=""):r=s+"/"+F(JSON.stringify(h)),f.headers=qe(f.headers,n),l&&(u=u+(u?"&":"")+"withReasons=true"),r=r+(u?"?":"")+u,A(),a.info(we(r)),o=(new Date).getTime(),g=e.eventSourceFactory(r,f),m)q(m,v)&&g.addEventListener(v,m[v]);g.onerror=E,g.onopen=function(){b=0}}}function A(){g&&(a.info("Closing stream connection"),g.close(),g=null)}function U(e){o&&r&&r.recordStreamInit(o,!e,(new Date).getTime()-o),o=null}return u.connect=function(e,n,t){h=e,w=n,m={};var r=function(e){m[e]=function(n){v=!1,U(!0),t[e]&&t[e](n)}};for(var o in t||{})r(o);k()},u.disconnect=function(){clearTimeout(p),p=null,A()},u.isConnected=function(){return!!(g&&e.eventSourceIsActive&&e.eventSourceIsActive(g))},u}function Ke(e,n,t){var r=n.baseUrl,o=n.useReport,i=n.evaluationReasons,a=n.logger,u={},s={};function c(t,r){if(!e.httpRequest)return new Promise((function(e,n){n(new w(he()))}));var o=r?"REPORT":"GET",i=Me(e,n);r&&(i["Content-Type"]="application/json");var a=s[t];a||(a=function(e){var n,t,r,o,i={addPromise:function(i,a){n=i,t&&t(),t=a,i.then((function(t){n===i&&(r(t),e&&e())}),(function(t){n===i&&(o(t),e&&e())}))}};return i.resultPromise=new Promise((function(e,n){r=e,o=n})),i}((function(){delete s[t]})),s[t]=a);var u=e.httpRequest(o,t,qe(i,n),r),c=u.promise.then((function(e){if(200===e.status){if(e.header("content-type")&&"application/json"===e.header("content-type").substring(0,16))return JSON.parse(e.body);var n=oe(e.header("content-type")||"");return Promise.reject(new w(n))}return Promise.reject(function(e){return 404===e.status?new v(se()):new w(le(e.statusText||String(e.status)))}(e))}),(function(e){return Promise.reject(new w(ae(e)))}));return a.addPromise(c,(function(){u.cancel&&u.cancel()})),a.resultPromise}return u.fetchJSON=function(e){return c(I(r,e),null)},u.fetchFlagSettings=function(e,n){var u,s,l,f="";return o?(s=[r,"/sdk/evalx/",t,"/user"].join(""),l=JSON.stringify(e)):(u=F(JSON.stringify(e)),s=[r,"/sdk/evalx/",t,"/users/",u].join("")),n&&(f="h="+n),i&&(f=f+(f?"&":"")+"withReasons=true"),s=s+(f?"?":"")+f,a.debug(Ae(s)),c(s,l)},u}function Je(e){var n={validateUser:function(n){if(!n)return Promise.reject(new g(fe()));var t=C(n);return null!==t.key&&void 0!==t.key?(t.key=t.key.toString(),Promise.resolve(t)):t.anonymous?e.get("ld:$anonUserId").then((function(n){if(n)return t.key=n,t;var r=Z();return t.key=r,function(n){return e.set("ld:$anonUserId",n)}(r).then((function(){return t}))})):Promise.reject(new g(de()))}};return n}var Xe=Object.freeze({__proto__:null,baseOptionDefs:He,validate:Be,getTags:_e}).baseOptionDefs,$e=V.appendUrlPath,Ge=function(e){var n={diagnosticId:Z()};return e&&(n.sdkKeySuffix=e.length>6?e.substring(e.length-6):e),n},We={flagUsed:"flag-used",flagDetailsChanged:"flag-details-changed",flagDetailChanged:"flag-detail-changed",clientIdentityChanged:"client-identity-changed"};function Ze(e,n){var t,r={},o=(a(t={},We.flagUsed,[]),a(t,We.flagDetailsChanged,[]),a(t,We.flagDetailChanged,[]),a(t,We.clientIdentityChanged,[]),t);return(null==e?void 0:e.map((function(e){return function(e,n){var t=!1,r={type:e.type,name:e.name,method:function(){try{e.method.apply(e,arguments)}catch(e){t||(t=!0,n.warn(Ce(r.type,r.name)))}}};return r}(e,n)}))).forEach((function(e){Object.prototype.hasOwnProperty.call(o,e.type)?o[e.type].push(e):n.warn(Fe(e.type,e.name))})),r.hasListeners=function(e){var n;return null===(n=o[e])||void 0===n?void 0:n.length},r.onFlagUsed=function(e,n,t){o[We.flagUsed].length&&j((function(){o[We.flagUsed].forEach((function(r){return r.method(e,n,t)}))}))},r.onFlags=function(e){o[We.flagDetailsChanged].length&&j((function(){o[We.flagDetailsChanged].forEach((function(n){return n.method(e)}))}))},r.onFlagChanged=function(e,n){o[We.flagDetailChanged].length&&j((function(){o[We.flagDetailChanged].forEach((function(t){return t.method(e,n)}))}))},r.onIdentityChanged=function(e){o[We.clientIdentityChanged].length&&j((function(){o[We.clientIdentityChanged].forEach((function(n){return n.method(e)}))}))},r}function Qe(e,n,t,r,a){var s,c,l,f=t&&t.logger?t.logger:a&&a.logger&&a.logger.default||ne("warn"),g=function(e){var n={},t={};return n.on=function(e,n,r){t[e]=t[e]||[],t[e]=t[e].concat({handler:n,context:r})},n.off=function(e,n,r){if(t[e])for(var o=0;o<t[e].length;o++)t[e][o].handler===n&&t[e][o].context===r&&(t[e]=t[e].slice(0,o).concat(t[e].slice(o+1)))},n.emit=function(e){if(t[e])for(var n=t[e].slice(0),r=0;r<n.length;r++)n[r].handler.apply(n[r].context,Array.prototype.slice.call(arguments,1))},n.getEvents=function(){return Object.keys(t)},n.getEventListenerCount=function(e){return t[e]?t[e].length:0},n.maybeReportError=function(n){n&&(t.error?this.emit("error",n):(e||console).error(n.message))},n}(f),h=function(e){var n=!1,t=!1,r=null,o=null,i=new Promise((function(n){e.on("ready",(function t(){e.off("ready",t),n()}))})).catch((function(){}));return{getInitializationPromise:function(){return o||(n?Promise.resolve():t?Promise.reject(r):o=new Promise((function(n,t){e.on("initialized",(function t(){e.off("initialized",t),n()})),e.on("failed",(function n(r){e.off("failed",n),t(r)}))})))},getReadyPromise:function(){return i},signalSuccess:function(){n||t||(n=!0,e.emit("initialized"),e.emit("ready"))},signalFailure:function(o){n||t||(t=!0,r=o,e.emit("failed",o),e.emit("ready")),e.maybeReportError(o)}}}(g),b=Be(t,g,a,f),E=Ze(b.inspectors,f),k=b.sendEvents,S=e,A=b.hash,U=function(e,n){var t={},r=!1,o=function(e){r||(r=!0,n.warn(ie(e)))};return t.isEnabled=function(){return!!e},t.get=function(n){return new Promise((function(t){e?e.get(n).then(t).catch((function(e){o(e),t(void 0)})):t(void 0)}))},t.set=function(n,t){return new Promise((function(r){e?e.set(n,t).then((function(){return r(!0)})).catch((function(e){o(e),r(!1)})):r(!1)}))},t.clear=function(n){return new Promise((function(t){e?e.clear(n).then((function(){return t(!0)})).catch((function(e){o(e),t(!1)})):t(!1)}))},t}(r.localStorage,f),O=ze(r,S,b),D=b.sendEvents&&!b.diagnosticOptOut,P=D?Ge(S):null,R=D?function(e){var n,t,r,o;function i(e){n=e,t=0,r=0,o=[]}return i((new Date).getTime()),{getProps:function(){return{dataSinceDate:n,droppedEvents:t,eventsInLastBatch:r,streamInits:o}},setProps:function(e){n=e.dataSinceDate,t=e.droppedEvents||0,r=e.eventsInLastBatch||0,o=e.streamInits||[]},incrementDroppedEvents:function(){t++},setEventsInLastBatch:function(e){r=e},recordStreamInit:function(e,n,t){var r={timestamp:e,failed:n,durationMillis:t};o.push(r)},reset:i}}():null,T=D?function(e,n,t,r,i,a,u){var s,c,l=!!e.diagnosticUseCombinedEvent,f="ld:"+i+":$diagnostics",d=$e(a.eventsUrl,"/events/diagnostic/"+i),v=a.diagnosticRecordingInterval,g=t,p=!!a.streaming,h={};function w(){return{sdk:b(),configuration:(n={customBaseURI:a.baseUrl!==Xe.baseUrl.default,customStreamURI:a.streamUrl!==Xe.streamUrl.default,customEventsURI:a.eventsUrl!==Xe.eventsUrl.default,eventsCapacity:a.eventCapacity,eventsFlushIntervalMillis:a.flushInterval,reconnectTimeMillis:a.streamReconnectDelay,streamingDisabled:!p,allAttributesPrivate:!!a.allAttributesPrivate,inlineUsersInEvents:!!a.inlineUsersInEvents,diagnosticRecordingIntervalMillis:a.diagnosticRecordingInterval,usingSecureMode:!!a.hash,bootstrapMode:!!a.bootstrap,fetchGoalsDisabled:!a.fetchGoals,sendEventsOnlyForVariation:!!a.sendEventsOnlyForVariation,autoAliasingOptOut:!!a.autoAliasingOptOut},n),platform:e.diagnosticPlatformData};var n}function m(e){a.logger&&a.logger.debug(je.debugPostingDiagnosticEvent(e)),r.sendEvents(e,d,!0).then((function(){})).catch((function(){}))}function y(){var e,t;m((e=(new Date).getTime(),t=o({kind:l?"diagnostic-combined":"diagnostic",id:u,creationDate:e},g.getProps()),l&&(t=o(o({},t),w())),g.reset(e),t)),c=setTimeout(y,v),s=(new Date).getTime(),l&&function(){if(n.isEnabled()){var e=o({},g.getProps());n.set(f,JSON.stringify(e))}}()}function b(){var n=o({},e.diagnosticSdkData);return a.wrapperName&&(n.wrapperName=a.wrapperName),a.wrapperVersion&&(n.wrapperVersion=a.wrapperVersion),n}return h.start=function(){l?function(e){if(!n.isEnabled())return e(!1);n.get(f).then((function(n){if(n)try{var t=JSON.parse(n);g.setProps(t),s=t.dataSinceDate}catch(e){}e(!0)})).catch((function(){e(!1)}))}((function(e){if(e){var n=(s||0)+v,t=(new Date).getTime();t>=n?y():c=setTimeout(y,n-t)}else 0===Math.floor(4*Math.random())?y():c=setTimeout(y,v)})):(m(o({kind:"diagnostic-init",id:u,creationDate:g.getProps().dataSinceDate},w())),c=setTimeout(y,v))},h.stop=function(){c&&clearTimeout(c)},h.setStreaming=function(e){p=e},h}(r,U,R,O,S,b,P):null,F=Ye(r,b,S,R),x=b.eventProcessor||function(e,n,t){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a={},u=(arguments.length>5&&void 0!==arguments[5]?arguments[5]:null)||ze(e,t,n),s=I(n.eventsUrl,"/events/bulk/"+t),c=function(){var e={},n=0,t=0,r={};return e.summarizeEvent=function(e){if("feature"===e.kind){var o=e.key+":"+(null!==e.variation&&void 0!==e.variation?e.variation:"")+":"+(null!==e.version&&void 0!==e.version?e.version:""),i=r[o];i?i.count=i.count+1:r[o]={count:1,key:e.key,variation:e.variation,version:e.version,value:e.value,default:e.default},(0===n||e.creationDate<n)&&(n=e.creationDate),e.creationDate>t&&(t=e.creationDate)}},e.getSummary=function(){var e={},o=!0;for(var i in r){var a=r[i],u=e[a.key];u||(u={default:a.default,counters:[]},e[a.key]=u);var s={value:a.value,count:a.count};void 0!==a.variation&&null!==a.variation&&(s.variation=a.variation),a.version?s.version=a.version:s.unknown=!0,u.counters.push(s),o=!1}return o?null:{startDate:n,endDate:t,features:e}},e.clearSummary=function(){n=0,t=0,r={}},e}(),l=function(e){var n={},t=e.allAttributesPrivate,r=e.privateAttributeNames||[],o={key:!0,custom:!0,anonymous:!0},i={key:!0,secondary:!0,ip:!0,country:!0,email:!0,firstName:!0,lastName:!0,avatar:!0,name:!0,anonymous:!0,custom:!0};return n.filterUser=function(e){if(!e)return null;var n=e.privateAttributeNames||[],a=function(e,i){return Object.keys(e).reduce((function(a,u){var s=a;return i(u)&&(function(e){return!o[e]&&(t||-1!==n.indexOf(e)||-1!==r.indexOf(e))}(u)?s[1][u]=!0:s[0][u]=e[u]),s}),[{},{}])},u=a(e,(function(e){return i[e]})),s=u[0],c=u[1];if(e.custom){var l=a(e.custom,(function(){return!0}));s.custom=l[0],c=M({},c,l[1])}var f=Object.keys(c);return f.length&&(f.sort(),s.privateAttrs=f),s},n}(n),f=n.inlineUsersInEvents,v=n.samplingInterval,g=n.eventCapacity,p=n.flushInterval,h=n.logger,w=[],m=0,b=!1,E=!1;function k(){return 0===v||0===Math.floor(Math.random()*v)}function S(e){w.length<g?(w.push(e),E=!1):(E||(E=!0,h.warn("Exceeded event queue capacity. Increase capacity to avoid dropping events.")),o&&o.incrementDroppedEvents())}return a.enqueue=function(e){if(!b){var n=!1,t=!1;if(c.summarizeEvent(e),"feature"===e.kind?k()&&(n=!!e.trackEvents,t=function(e){return!!e.debugEventsUntilDate&&e.debugEventsUntilDate>m&&e.debugEventsUntilDate>(new Date).getTime()}(e)):n=k(),n&&S(function(e){var n=M({},e);return"alias"===e.kind||(f||"identify"===e.kind?n.user=l.filterUser(e.user):(n.userKey=e.user.key,delete n.user),"feature"===e.kind&&(delete n.trackEvents,delete n.debugEventsUntilDate)),n}(e)),t){var r=M({},e,{kind:"debug"});r.user=l.filterUser(r.user),delete r.trackEvents,delete r.debugEventsUntilDate,S(r)}}},a.flush=function(){if(b)return Promise.resolve();var e=w,n=c.getSummary();return c.clearSummary(),n&&(n.kind="summary",e.push(n)),o&&o.setEventsInLastBatch(e.length),0===e.length?Promise.resolve():(w=[],h.debug(Ie(e.length)),u.sendEvents(e,s).then((function(e){e&&(e.serverTime&&(m=e.serverTime),y(e.status)||(b=!0),e.status>=400&&j((function(){i.maybeReportError(new d(pe(e.status,"event posting","some events were dropped")))})))})))},a.start=function(){r=setTimeout((function e(){a.flush(),r=setTimeout(e,p)}),p)},a.stop=function(){clearTimeout(r)},a}(r,b,S,R,g,O),B=Ke(r,b,S),_={},V=b.streaming,Y=!1,K=!1,J=!0,X=b.stateProvider,$=function(e,n){var t,r={setUser:function(e){var r=t&&C(t);(t=z(e))&&n&&n(C(t),r)},getUser:function(){return t?C(t):null}};return r}(0,(function(e,n){(function(e){X||e&&Z({kind:"identify",key:e.key,user:e,creationDate:(new Date).getTime()})})(e),!b.autoAliasingOptOut&&n&&n.anonymous&&e&&!e.anonymous&&se(e,n),E.hasListeners(We.clientIdentityChanged)&&E.onIdentityChanged($.getUser())})),G=Je(U),W=U.isEnabled()?new Ve(U,S,A,$):null;function Z(e){if(S&&!(X&&X.enqueueEvent&&X.enqueueEvent(e))){if("alias"!==e.kind){if(!e.user)return void(J&&(f.warn("Be sure to call `identify` in the LaunchDarkly client: https://docs.launchdarkly.com/sdk/features/identify#javascript"),J=!1));J=!1}!k||K||r.isDoNotTrack()||(f.debug(Re(e.kind)),x.enqueue(e))}}function Q(e,n){E.hasListeners(We.flagDetailChanged)&&E.onFlagChanged(e.key,oe(n))}function ee(){E.hasListeners(We.flagDetailsChanged)&&E.onFlags(Object.entries(_).map((function(e){var n=u(e,2);return{key:n[0],detail:oe(n[1])}})).reduce((function(e,n){return e[n.key]=n.detail,e}),{}))}function te(e,n,t,r){var o=$.getUser(),i=new Date,a={kind:"feature",key:e,user:o,value:n?n.value:null,variation:n?n.variationIndex:null,default:t,creationDate:i.getTime()};o&&o.anonymous&&(a.contextKind=ae(o));var u=_[e];u&&(a.version=u.flagVersion?u.flagVersion:u.version,a.trackEvents=u.trackEvents,a.debugEventsUntilDate=u.debugEventsUntilDate),(r||u&&u.trackReason)&&n&&(a.reason=n.reason),Z(a)}function re(e,n,t,r,o){var i;if(_&&q(_,e)&&_[e]&&!_[e].deleted){var a=_[e];i=oe(a),null!==a.value&&void 0!==a.value||(i.value=n)}else i={value:n,variationIndex:null,reason:{kind:"ERROR",errorKind:"FLAG_NOT_FOUND"}};return t&&te(e,i,n,r),o||function(e,n){E.hasListeners(We.flagUsed)&&E.onFlagUsed(e,n,$.getUser())}(e,i),i}function oe(e){return{value:e.value,variationIndex:void 0===e.variation?null:e.variation,reason:e.reason||null}}function ae(e){return e.anonymous?"anonymousUser":"user"}function se(e,n){X||e&&n&&Z({kind:"alias",key:e.key,contextKind:ae(e),previousKey:n.key,previousContextKind:ae(n),creationDate:(new Date).getTime()})}function fe(){if(c=!0,$.getUser()){var e=function(e){try{return JSON.parse(e)}catch(e){return void g.maybeReportError(new m("Invalid data received from LaunchDarkly; connection may have been interrupted"))}};F.connect($.getUser(),A,{ping:function(){f.debug("received ping message from stream");var e=$.getUser();B.fetchFlagSettings(e,A).then((function(n){L(e,$.getUser())&&ge(n||{})})).catch((function(e){g.maybeReportError(new w(le(e)))}))},put:function(n){var t=e(n.data);t&&(f.debug("received streaming update for all flags"),ge(t))},patch:function(n){var t=e(n.data);if(t){var r=_[t.key];if(!r||!r.version||!t.version||r.version<t.version){f.debug(Ue(t.key));var o={},i=M({},t);delete i.key,_[t.key]=i;var a=oe(i);o[t.key]=r?{previous:r.value,current:a}:{current:a},he(o),Q(t,i)}else f.debug(Oe(t.key))}},delete:function(n){var t=e(n.data);if(t)if(!_[t.key]||_[t.key].version<t.version){f.debug(De(t.key));var r={};_[t.key]&&!_[t.key].deleted&&(r[t.key]={previous:_[t.key].value}),_[t.key]={version:t.version,deleted:!0},Q(t,_[t.key]),he(r)}else f.debug(Pe(t.key))}})}}function de(){c&&(F.disconnect(),c=!1)}function ge(e){var n={};if(!e)return Promise.resolve();for(var t in _)q(_,t)&&_[t]&&(e[t]&&!L(e[t].value,_[t].value)?n[t]={previous:_[t].value,current:oe(e[t])}:e[t]&&!e[t].deleted||(n[t]={previous:_[t].value}));for(var r in e)q(e,r)&&e[r]&&(!_[r]||_[r].deleted)&&(n[r]={current:oe(e[r])});return _=o({},e),ee(),he(n).catch((function(){}))}function he(e){var n=Object.keys(e);if(n.length>0){var t={};n.forEach((function(n){var r=e[n].current,o=r?r.value:void 0,i=e[n].previous;g.emit("change:"+n,o,i),t[n]=r?{current:o,previous:i}:{previous:i}})),g.emit("change",t),g.emit("internal-change",_),b.sendEventsOnlyForVariation||X||n.forEach((function(n){te(n,e[n].current)}))}return s&&W?W.saveFlags(_):Promise.resolve()}function we(){var e=V||l&&void 0===V;e&&!c?fe():!e&&c&&de(),T&&T.setStreaming(e)}function me(e){return"change"===e||"change:"===e.substr(0,7)}if("string"==typeof b.bootstrap&&"LOCALSTORAGE"===b.bootstrap.toUpperCase()&&(W?s=!0:f.warn(ie())),"object"===i(b.bootstrap)&&(_=function(e){var n=Object.keys(e),t=e.$flagsState;!t&&n.length&&f.warn(ve()),!1===e.$valid&&f.warn("LaunchDarkly bootstrap data is not available because the back end could not read the flags.");var r={};return n.forEach((function(n){if("$flagsState"!==n&&"$valid"!==n){var o={value:e[n]};t&&t[n]?o=M(o,t[n]):o.version=0,r[n]=o}})),r}(b.bootstrap)),X){var ye=X.getInitialState();ye?be(ye):X.on("init",be),X.on("update",(function(e){e.user&&$.setUser(e.user),e.flags&&ge(e.flags)}))}else(e?G.validateUser(n).then((function(e){return $.setUser(e),"object"===i(b.bootstrap)?Ee():s?W.loadFlags().then((function(e){return null==e?(_={},B.fetchFlagSettings($.getUser(),A).then((function(e){return ge(e||{})})).then(Ee).catch((function(e){ke(new w(le(e)))}))):(_=e,j(Ee),B.fetchFlagSettings($.getUser(),A).then((function(e){return ge(e)})).catch((function(e){return g.maybeReportError(e)})))})):B.fetchFlagSettings($.getUser(),A).then((function(e){_=e||{},ee(),Ee()})).catch((function(e){_={},ke(e)}))})):Promise.reject(new v(ce()))).catch(ke);function be(e){S=e.environment,$.setUser(e.user),_=o({},e.flags),j(Ee)}function Ee(){f.info("LaunchDarkly client initialized"),Y=!0,we(),h.signalSuccess()}function ke(e){h.signalFailure(e)}return{client:{waitForInitialization:function(){return h.getInitializationPromise()},waitUntilReady:function(){return h.getReadyPromise()},identify:function(e,n,t){return K?H(Promise.resolve({}),t):X?(f.warn("identify() has no effect here; it must be called on the main client instance"),H(Promise.resolve(N(_)),t)):H((s&&W?W.clearFlags():Promise.resolve()).then((function(){return G.validateUser(e)})).then((function(e){return B.fetchFlagSettings(e,n).then((function(t){var r=N(t);return $.setUser(e),A=n,t?ge(t).then((function(){return r})):r}))})).then((function(e){return c&&fe(),e})).catch((function(e){return g.maybeReportError(e),Promise.reject(e)})),t)},getUser:function(){return $.getUser()},variation:function(e,n){return re(e,n,!0,!1,!1).value},variationDetail:function(e,n){return re(e,n,!0,!0,!1)},track:function(e,n,t){if("string"==typeof e){r.customEventFilter&&!r.customEventFilter(e)&&f.warn(ue(e));var o=$.getUser(),i={kind:"custom",key:e,user:o,url:r.getCurrentUrl(),creationDate:(new Date).getTime()};o&&o.anonymous&&(i.contextKind=ae(o)),null!=n&&(i.data=n),null!=t&&(i.metricValue=t),Z(i)}else g.maybeReportError(new p(ue(e)))},alias:se,on:function(e,n,t){me(e)?(l=!0,Y&&we(),g.on(e,n,t)):g.on.apply(g,arguments)},off:function(e){if(g.off.apply(g,arguments),me(e)){var n=!1;g.getEvents().forEach((function(e){me(e)&&g.getEventListenerCount(e)>0&&(n=!0)})),n||(l=!1,c&&void 0===V&&de())}},setStreaming:function(e){var n=null===e?void 0:e;n!==V&&(V=n,we())},flush:function(e){return H(k?x.flush():Promise.resolve(),e)},allFlags:function(){var e={};if(!_)return e;for(var n in _)q(_,n)&&!_[n].deleted&&(e[n]=re(n,null,!b.sendEventsOnlyForVariation,!1,!0).value);return e},close:function(e){if(K)return H(Promise.resolve(),e);var n=function(){K=!0,_={}};return H(Promise.resolve().then((function(){if(de(),T&&T.stop(),k)return x.stop(),x.flush()})).then(n).catch(n),e)}},options:b,emitter:g,ident:$,logger:f,requestor:B,start:function(){k&&(T&&T.start(),x.start())},enqueueEvent:Z,getFlagsInternal:function(){return _},getEnvironmentId:function(){return S},internalChangeEventName:"internal-change"}}function en(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function nn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?en(Object(t),!0).forEach((function(n){tn(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):en(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function tn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}Object.freeze(We);var rn=Object.freeze({__proto__:null,commonBasicLogger:ee,createConsoleLogger:ne,get errors(){return b},initialize:Qe,messages:je,utils:V,version:"3.8.2"}).commonBasicLogger,on={promise:Promise.resolve({status:200,header:function(){return null},body:null})};function an(e){var n,t={synchronousFlush:!1};if(window.XMLHttpRequest){var r=e&&e.disableSyncEventPost;t.httpRequest=function(e,n,o,i){var a=t.synchronousFlush&!r;return t.synchronousFlush=!1,function(e,n,t,r,o){if(o&&!function(){var e=window.navigator&&window.navigator.userAgent;if(e){var n=e.match(/Chrom(e|ium)\/([0-9]+)\./);if(n)return parseInt(n[2],10)<73}return!0}())return on;var i=new window.XMLHttpRequest;for(var a in i.open(e,n,!o),t||{})Object.prototype.hasOwnProperty.call(t,a)&&i.setRequestHeader(a,t[a]);if(o)return i.send(r),on;var u,s=new Promise((function(e,n){i.addEventListener("load",(function(){u||e({status:i.status,header:function(e){return i.getResponseHeader(e)},body:i.responseText})})),i.addEventListener("error",(function(){u||n(new Error)})),i.send(r)}));return{promise:s,cancel:function(){u=!0,i.abort()}}}(e,n,o,i,a)}}t.httpAllowsPost=function(){return void 0===n&&(n=!!window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest),n},t.httpFallbackPing=function(e){(new window.Image).src=e};var o,i=e&&e.eventUrlTransformer;t.getCurrentUrl=function(){return i?i(window.location.href):window.location.href},t.isDoNotTrack=function(){var e;return 1===(e=window.navigator&&void 0!==window.navigator.doNotTrack?window.navigator.doNotTrack:window.navigator&&void 0!==window.navigator.msDoNotTrack?window.navigator.msDoNotTrack:window.doNotTrack)||!0===e||"1"===e||"yes"===e};try{window.localStorage&&(t.localStorage={get:function(e){return new Promise((function(n){n(window.localStorage.getItem(e))}))},set:function(e,n){return new Promise((function(t){window.localStorage.setItem(e,n),t()}))},clear:function(e){return new Promise((function(n){window.localStorage.removeItem(e),n()}))}})}catch(e){t.localStorage=null}if(e&&e.useReport&&"function"==typeof window.EventSourcePolyfill&&window.EventSourcePolyfill.supportedOptions&&window.EventSourcePolyfill.supportedOptions.method?(t.eventSourceAllowsReport=!0,o=window.EventSourcePolyfill):(t.eventSourceAllowsReport=!1,o=window.EventSource),window.EventSource){var a=3e5;t.eventSourceFactory=function(e,n){var t=nn(nn({},{heartbeatTimeout:a,silentTimeout:a,skipDefaultHeaders:!0}),n);return new o(e,t)},t.eventSourceIsActive=function(e){return e.readyState===window.EventSource.OPEN||e.readyState===window.EventSource.CONNECTING}}return t.userAgent="JSClient",t.version="2.24.2",t.diagnosticSdkData={name:"js-client-sdk",version:"2.24.2"},t.diagnosticPlatformData={name:"JS"},t.diagnosticUseCombinedEvent=!0,t}var un=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")};function sn(e,n,t,r){var o,i,a=("substring"!==e.kind&&"regex"!==e.kind||!r.includes("/")?n.replace(r,""):n).replace(t,"");switch(e.kind){case"exact":i=n,o=new RegExp("^"+un(e.url)+"/?$");break;case"canonical":i=a,o=new RegExp("^"+un(e.url)+"/?$");break;case"substring":i=a,o=new RegExp(".*"+un(e.substring)+".*$");break;case"regex":i=a,o=new RegExp(e.pattern);break;default:return!1}return o.test(i)}function cn(e,n){for(var t={},r=null,o=[],i=0;i<e.length;i++)for(var a=e[i],u=a.urls||[],s=0;s<u.length;s++)if(sn(u[s],window.location.href,window.location.search,window.location.hash)){"pageview"===a.kind?n("pageview",a):(o.push(a),n("click_pageview",a));break}return o.length>0&&(r=function(e){for(var t=function(e,n){for(var t=[],r=0;r<n.length;r++)for(var o=e.target,i=n[r],a=i.selector,u=document.querySelectorAll(a);o&&u.length>0;){for(var s=0;s<u.length;s++)o===u[s]&&t.push(i);o=o.parentNode}return t}(e,o),r=0;r<t.length;r++)n("click",t[r])},document.addEventListener("click",r)),t.dispose=function(){document.removeEventListener("click",r)},t}var ln={fetchGoals:{default:!0},hash:{type:"string"},eventProcessor:{type:"object"},eventUrlTransformer:{type:"function"},disableSyncEventPost:{default:!1}};function fn(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=an(t),o=Qe(e,n,t,r,ln),i=o.client,a=o.options,u=o.emitter,s=new Promise((function(e){var n=u.on("goalsReady",(function(){u.off("goalsReady",n),e()}))}));i.waitUntilGoalsReady=function(){return s},a.fetchGoals?function(e,n){var t,r;function o(){r&&r.dispose(),t&&t.length&&(r=cn(t,i))}function i(n,t){var r=e.ident.getUser(),o={kind:n,key:t.key,data:null,url:window.location.href,user:r,creationDate:(new Date).getTime()};return r&&r.anonymous&&(o.contextKind="anonymousUser"),"click"===n&&(o.selector=t.selector),e.enqueueEvent(o)}e.requestor.fetchJSON("/sdk/goals/"+e.getEnvironmentId()).then((function(e){e&&e.length>0&&(r=cn(t=e,i),function(e,n){var t,r=window.location.href;function o(){(t=window.location.href)!==r&&(r=t,n())}!function e(n,t){n(),setTimeout((function(){e(n,t)}),t)}(o,300),window.history&&window.history.pushState?window.addEventListener("popstate",o):window.addEventListener("hashchange",o)}(0,o)),n()})).catch((function(t){e.emitter.maybeReportError(new b.LDUnexpectedResponseError((t&&t.message,t.message))),n()}))}(o,(function(){return u.emit("goalsReady")})):u.emit("goalsReady"),"complete"!==document.readyState?window.addEventListener("load",o.start):o.start();var c=function(){r.synchronousFlush=!0,i.flush().catch((function(){})),r.synchronousFlush=!1};return window.addEventListener("beforeunload",c),window.addEventListener("unload",c),i}n.basicLogger=function(e){return rn(nn({destination:console.log},e))},n.createConsoleLogger=ne,n.version="2.24.2",n.default={initialize:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return console&&console.warn&&console.warn(je.deprecated("default export","named LDClient export")),fn(e,n,t)},version:"2.24.2"}}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var i=n[r]={exports:{}};return e[r](i,i.exports,t),i.exports}var r={};return(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(15),o=t(938),i=function(){function e(){return u()||a.bind(this)(),this._ready=!1,window.FeatureFlags}var t=e.prototype;return t.initialize=function(e){if(this._ready=!1,window.ldClientId){var t=new o("SHA-256","TEXT");e&&t.update(e);var r={key:e?t.getHash("B64"):"TinkercadUser"};this.ldclient=n.initialize(window.ldClientId,r,{bootstrap:"localStorage",allAttributesPrivate:!0}),this.ldclient.on("ready",function(){this._ready=!0,console.log("ldClient ready")}.bind(this))}},t.waitForInitialization=function(){return this.ldclient.waitForInitialization()},t.waitUntilReady=function(){return this.ldclient.waitUntilReady()},t.checkFlag=function(e){return this._ready?this.ldclient.variation(e,!1):(console.log("FeatureFlags is not ready yet"),!1)},t.isClientReady=function(){return this._ready},e}();function a(){var e=this;Object.defineProperty(window,"FeatureFlags",{get:function(){return e}})}function u(){return!!(window.FeatureFlags&&window.FeatureFlags instanceof i)}if(window&&!u())new i;e.default=i})(),r})()));